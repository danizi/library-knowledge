<details>
  <summary>1 基本概念</summary>
  
  - view状态 ：view拥有多种状态例如按下，选中，禁用
  - 状态列表 ：StateListDrawable是可绘制对象，可包含多个<item>关联一组状态和对应的drawable。
  - 匹配规则 ：当view状态与<item>状态匹配时则显示该item的drawable。
  - 优先级   ：item顺序越靠前优先级越高匹配成功就不会检查后续的item。
</details>

<details>
  <summary>2 使用方式</summary>

  - 2.1 xml创建StateListDrawable
    ```
    <!-- res/drawable/btn_bg.xml -->
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <!-- 按下状态：红色背景 -->
        <item android:drawable="@color/red" android:state_pressed="true" />
        <!-- 选中状态：蓝色背景 -->
        <item android:drawable="@color/blue" android:state_selected="true" />
        <!-- 禁用状态：灰色背景 -->
        <item android:drawable="@color/gray" android:state_enabled="false" />
        <!-- 默认状态：绿色背景（必须放在最后，作为兜底） -->
        <item android:drawable="@color/green" />
    </selector>
    ```
    > xml语法请查看[状态列表-语法](https://developer.android.com/guide/topics/resources/drawable-resource?hl=zh-cn#StateList)

  - 2.2 代码创建StateListDrawable
    ```
    // 创建 StateListDrawable
    val stateListDrawable = StateListDrawable()
    
    // 1. 按下状态：红色背景
    val pressedDrawable = ColorDrawable(Color.RED)
    stateListDrawable.addState(intArrayOf(android.R.attr.state_pressed), pressedDrawable)
    
    // 2. 选中状态：蓝色背景
    val selectedDrawable = ColorDrawable(Color.BLUE)
    stateListDrawable.addState(intArrayOf(android.R.attr.state_selected), selectedDrawable)
    
    // 3. 禁用状态：灰色背景
    val disabledDrawable = ColorDrawable(Color.GRAY)
    stateListDrawable.addState(intArrayOf(-android.R.attr.state_enabled), disabledDrawable) // "-" 表示状态为 false
    
    // 4. 默认状态：绿色背景（空数组表示无状态限制）
    val defaultDrawable = ColorDrawable(Color.GREEN)
    stateListDrawable.addState(intArrayOf(), defaultDrawable)
    
    // 应用到 Button
    button.background = stateListDrawable
    ```
</details>


<details>
  <summary>3 使用技巧</summary>

  - 多状态组合
    <br>一个 <item> 可以关联多个状态，只有当所有状态都匹配时才生效（逻辑与关系）：
    ```
    <!-- 按下且选中状态：紫色背景 -->
    <item 
      android:drawable="@color/purple" 
      android:state_pressed="true" 
      android:state_selected="true" />
    ```
    
- 反向状态
  
- 与shapeDrawable结合
  <br>通过 <shape> 标签定义自定义形状，结合状态切换：
  ```
  <!-- res/drawable/btn_custom_bg.xml -->
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
      <!-- 按下状态：圆角矩形，红色背景，黑色边框 -->
      <item android:state_pressed="true">
          <shape android:shape="rectangle">
              <corners android:radius="8dp" />
              <solid android:color="@color/red" />
              <stroke android:width="2dp" android:color="@color/black" />
          </shape>
      </item>
      <!-- 默认状态：圆角矩形，绿色背景，灰色边框 -->
      <item>
          <shape android:shape="rectangle">
              <corners android:radius="8dp" />
              <solid android:color="@color/green" />
              <stroke android:width="2dp" android:color="@color/gray" />
          </shape>
      </item>
  </selector>
  ```
  
- 与位图矢量图结合
  <br> 适合图标状态切换（如 Tab 选中 / 未选中图标）：
  ```
  <!-- res/drawable/tab_icon_home.xml -->
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
      <!-- 选中状态：填充色为蓝色的 Home 图标 -->
      <item android:drawable="@drawable/ic_home_filled" android:state_selected="true" />
      <!-- 默认状态：描边色为灰色的 Home 图标 -->
      <item android:drawable="@drawable/ic_home_outline" />
   </selector>
   ```
  
- 状态过度动画
  <br>实现状态切换时的平滑过渡动画（如按钮按下时的缩放效果）：
   ```
   <!-- res/drawable/btn_animated_bg.xml -->
  <animated-selector xmlns:android="http://schemas.android.com/apk/res/android">
      <!-- 定义状态对应的 Drawable -->
      <item android:id="@+id/state_pressed" android:drawable="@color/red" android:state_pressed="true" />
      <item android:id="@+id/state_default" android:drawable="@color/green" />
  
      <!-- 定义状态过渡动画（从默认到按下） -->
      <transition android:fromId="@id/state_default" android:toId="@id/state_pressed">
          <animation-list>
              <item android:drawable="@color/green" android:duration="50" />
              <item android:drawable="@color/yellow" android:duration="50" />
              <item android:drawable="@color/red" android:duration="50" />
          </animation-list>
      </transition>
  
      <!-- 定义状态过渡动画（从按下到默认） -->
      <transition android:fromId="@id/state_pressed" android:toId="@id/state_default">
          <animation-list>
              <item android:drawable="@color/red" android:duration="50" />
              <item android:drawable="@color/yellow" android:duration="50" />
              <item android:drawable="@color/green" android:duration="50" />
          </animation-list>
      </transition>
  </animated-selector>
   ```
</details>

<details>
  <summary>4 常见问题</summary>
  
  - 状态不生效
    - TextView未设置clickable和focusable，状态不生效。
</details>

<details>
  <summary>5 应用场景</summary>
  
    - 按钮背景：正常 / 按下 / 禁用状态切换
    - tab图标 ：选中 / 未选中状态切换
    - 列表项  ：选中 / 聚焦状态切换
    - 开关    ：开启 / 关闭状态切换
</details>
  



